enum banType {
    USER
    IP
    MACHINE
}

enum banStatus {
    BANNED
    APPEALING
    REJECTED
}

enum roomType {
	PUBLIC
	LOCKED
	PASSWORD
	HIDDEN
}

type Ban @pgTable(name: "bans") {
    id: ID! @id
    reason: String
    status: banStatus
    type: banType
    user: Int
    ip: String
    machine: String
    by: Int
    createdAt: DateTime @createdAt
    updatedAt: DateTime @updatedAt
}

type Badge @pgTable(name: "badges") {
    id: ID! @id
    code: String! @unique
    description: String
}

type Bot @pgTable(name: "bots") {
    id: ID! @id
    name: String
    motto: String
    inventory: Boolean
    owner: Int
    gender: Boolean
    figure: String
    type: String
    state: [String] @scalarList(strategy: RELATION)
    action: [String] @scalarList(strategy: RELATION)
    position: [Int] @scalarList(strategy: RELATION)
    messages: String
    chatBubble: Int
    chatAuto: Int
    chatRandom: Boolean
    chatDelay: Int @default(value: 4)
}

type CatalogPage @pgTable(name: "catalog_pages") {
	id: ID! @id
	parent: Int
	type: String
	order: Int
	name: String!
	caption: String
	description: String
	icon: String
	visible: Boolean @default(value: true)
	enabled: Boolean @default(value: true)
	rank: Int @default(value: 1)
	club: Boolean @default(value: false)
	vip: Boolean @default(value: false)
	body: String
}

type CatalogItem @pgTable(name: "catalog_items") {
    id: ID! @id
    page: Int
    item: Int
    name: String
    # price: Currencies
    amount: Int
    limited: Boolean
    maximum: Int @default(value: -1)
    stack: Boolean @default(value: true)
    active: Boolean
}

type Room @pgTable(name: "rooms") {
	id: ID! @id
	name: String!
	description: String
	type: roomType
	category: Int
	owner: Int
	map: Json
	floorThickness: Int
	wallThickness: Int
	wallHeight: Int
	hideWalls: Boolean @default(value: false)
	hideWired: Boolean @default(value: false)
	maxUsers: Int @default(value: 10)
	allowPets: Boolean @default(value: false)
	allowPetsEating: Boolean @default(value: false)
	rights: [Int] @scalarList(strategy: RELATION)
	items: [Item] @relation(name: "Items", onDelete: CASCADE)
}

type Item @pgTable(name: "items") {
    id: ID! @id
    owner: Int
    room: Room! @relation(name: "RoomItems", onDelete: SET_NULL)
    furniture: Int
	type: String
    x: Int
    y: Int
    z: Int
    rotation: Int
    wallPosition: [Float] @scalarList(strategy: RELATION)
	inventory: Boolean
}

#3 Types

# Furniture (Class) -> Catalog Item (Instance where its displayed on the catalog) -> Item (Instance with a User as the owner)

# type Currencies {
#     id: ID! @id
#     name: String!
#     value: Int
# }

type User @pgTable(name: "users") {
    id: ID! @id
    username: String! @unique
    email: String
    password: String
    pin: Int
    motto: String
    figure: String
    rank: Int
    vip: Int
    online: Boolean
    verified: Int
    home: Int
    volume: Int
    muted: Boolean
    createdAt: DateTime @createdAt
    updatedAt: DateTime @updatedAt
}
